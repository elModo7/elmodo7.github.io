<!DOCTYPE html>
<html>
<head>
	<link href="css/prism/themes/coy.css" rel="stylesheet" />
</head>
<body>
	<script src="js/prism.js"></script>
	<pre style="overflow-y:scroll; max-width:50%; height:40%; border:0.5px solid lightgray; padding:5px; white-space:pre-wrap;"><code class="language-autohotkey">
readMem(MADDRESS,PROGRAM,BYT:=1)
{
    winget, pid, PID, %PROGRAM%
    VarSetCapacity(MVALUE,BYT,0)
    ProcessHandle := DllCall("OpenProcess", "Int", 24, "Char", 0, "UInt", pid, "UInt")
    DllCall("ReadProcessMemory", "UInt", ProcessHandle, "Ptr", MADDRESS, "Ptr", &MVALUE, "Uint",BYT)
    Loop %BYT%
    result += *(&MVALUE + A_Index-1) << 8*(A_Index-1)
    return, result
}

getEmulatorWorkRAM(gameExe, type = "gbc")
{
	SetFormat, Integer, hex
	if(gameExe == "ahk_exe mGBA.exe")
	{
		if(type == "gbc"){
			; Pointer to game base address for GBC WRAM (DXXX)
			base := getProcessBaseAddress(gameExe)
			st1 := readMem(base + 0x275CFC4 , gameExe, 4) 
			st2 := readMem(st1 + 0x30 , gameExe, 4) ; Also 0x18
			st3 := readMem(st2 + 0x3C , gameExe, 4)
			st4 := readMem(st3 + 0x4 , gameExe, 4)
			return readMem(st4 + 0x14C , gameExe, 4) + 0x1000
		}else if(type == "gba"){
			base := getProcessBaseAddress(gameExe)
			st1 := readMem(base + 0x275CFC4 , gameExe, 4) 
			st2 := readMem(st1 + 0x18 , gameExe, 4) ; Also 0x30
			st3 := readMem(st2 + 0x3C , gameExe, 4)
			st4 := readMem(st3 + 0x4 , gameExe, 4)
			return readMem(st4 + 0x14 , gameExe, 4)
		}
	}
	else if(gameExe == "ahk_exe VisualBoyAdvance.exe"){
		if(type == "gbc")
			return readMem(getProcessBaseAddress(gameExe) + 0x1C9280 , gameExe, 4) ; Pointer to game base address for GBC WRAM (DXXX)
		else if(type == "gba")
			return readMem(getProcessBaseAddress(gameExe) + 0x1B0604 , gameExe, 4) ; Pointer to game base address for GBA WRAM
	}else if(gameExe == "ahk_exe bgb64.exe"){
		return getEmulatorRAM(gameExe) + 0x1000
	}
}

; Unused, deprecated in favour of VxE's version
toHex(p_num) {
	A_FormatInteger_bkp:=A_FormatInteger
	SetFormat, Integer, H
	p_num+=0
	SetFormat, Integer, %A_FormatInteger_bkp%
	return p_num
}

FHex( int, pad=0 ) { ; Function by [VxE]. Formats an integer (decimals are truncated) as hex.
; "Pad" may be the minimum number of digits that should appear on the right of the "0x".
	Static hx := "0123456789ABCDEF"
	If !( 0 < int |= 0 )
		Return !int ? "0x0" : "-" FHex( -int, pad )
        
	s := 1 + Floor( Ln( int ) / Ln( 16 ) )
	h := SubStr( "0x0000000000000000", 1, pad := pad < s ? s + 2 : pad < 16 ? pad + 2 : 18 )
	u := A_IsUnicode = 1

	Loop % s
		NumPut( *( &hx + ( ( int & 15 ) << u ) ), h, pad - A_Index << u, "UChar" ), int >>= 4
	Return h

}

HexToDec(Hex)
{
	if (InStr(Hex, "0x") != 1)
		Hex := "0x" Hex
	return, Hex + 0
}
	</code></pre>
	<code class="language-autohotkey">DllCall("ReadProcessMemory","Uint",hwnd,"Uint",address+offset,"Str",readvalue,"Uint",length,"Uint *",0)</code>
</body>
</html>